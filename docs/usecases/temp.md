# Trade Finance

[![Primechain API](https://img.shields.io/badge/Built%20by-Primechain-blue.svg)](http://www.primechaintech.com/)

intro to trade finance

![Letter of credit](http://www.primechaintech.com/img/api_documentation/trade-finance.jpg)

***Table of contents***   

[1. Preliminary steps](#1-preliminary-steps)   
[1.1 Generate API keys](#11-generate-api-keys)      
[1.2 Generate RSA key pair](#12-generate-rsa-key-pair)      
[1.3 Create an entity whose private key is stored on the blockchain](#13-create-an-entity-whose-private-key-is-stored-on-the-blockchain)   

[2. Create a dedicated Data Stream for a specific transaction, shipment or event](#2-create-a-dedicated-data-stream-for-a-specific-transaction,-shipment-or-event)   
[2.1 Create a data stream](#21-create-a-data-stream)   
[2.2 Grant write permissions](#22-grant-write-permissions)   
[2.3 Revoke write permissions](#23-revoke-write-permissions)   

To onboard an entity 

## 1. Preliminary steps

TRADE-Chain nodes are available to banks, financial institutions and large exporters, importers and shippers. The  preliminary steps to be carried out by node holders are:

### 1.1 Generate API keys

API keys authenticate access to the TRADE-Chain API service. To generate an API key, use `get api/v1/get_api_key`. An API key must be passed in the authorization header.

Sample API key
```
k3wq1TdYcEGb7sqX&Es8-xVR$ocdw5ICLtIh5rT661UDaZoKmLV!12X01ce!GnEW
```
### 1.2 Generate RSA key pair

A node holder can generate an RSA key pair (public key and private key) using api/v1/create_rsa_keypair`. The newly generated keypair is stored in your dedicated database. The output is the RSA public key and the object id generated by the database.

Sample output
```
{
"status": 200,
"response": 
  {
    "rsa_public_key": "-----BEGIN PUBLIC KEY----- MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA8HV3jY2Gjx6tjNdJ1/JQ nZ2tha1gQcoMztSfDmjIolS4VscVUwfQjnsgM4ThzFDO3TqnpVeL/lciTnnZPj7X FV6sd9RaI4pIngyV42PuXjx82E0qZA0yV37TDdvsLYAPQIS4W8XgaL21r9VbHC2B LGDWaTcix6+VYFijDWP6CEanuUw6g4qACqZiE2PEmSoP0d9LBK28WwjIcrHFI1ib 9byn6q+Hs3ja9j640iyCiVGG1Q51HU11eWfpOMxroZ1gpJ7xnX5EpoFYwGjdJwDJ DKwScNqI7gjWtnS5NyvWq0ZIRAHh9Khu8YBwOxQTImVRSIaWxhCViqibUlyZsE8T wQIDAQAB -----END PUBLIC KEY-----",
    "rsa_pub_key_id": "5c359dde6f8950901b3beaf5"
  }
}
```
### 1.3 Create an entity whose private key is stored on the blockchain

To create an address whose private key is stored on the blockchain, use `get /api/v1/create_entity`.

The output will be the blockchain address of the newly created entity. The private key is automatically stored in your node. This will not be visible to other nodes. 

Sample output
```
{
"status": 200,
"primechain_address": "1VUid7fZaiFnNXddiwfwvk8idyXixkFKRSQvMp"
}
```

## 2. Create a dedicated Data Stream for a specific transaction, shipment or event
A data stream enables TRADE-Chain to be used as a general purpose append-only database, with TRADE-Chain providing timestamping, notarization and immutability. Storing all the data relating to a transaction, shipment or event in a dedicated data stream enables quick and efficient data retrieval and processing.

### 2.1 Create a data stream
To create a new data stream use `post /api/v1/create_data_stream` and provide these 4 parameters:
1. The creators address
2. The stream name
3. A short description of the data stream
4. Whether the stream is open or not. If open is set to true, write permissions need not be explicitly provided. All addresses can write to the stream. If open is set to false, write permissions need to be explicitly provided. It is recommended to keep the stream as closed and to provide write permissions on an address basis. 

Sample input
```
{
  "primechain_address": "1VUid7fZaiFnNXddiwfwvk8idyXixkFKRSQvMp",
  "stream_name": "200_tons_xyz_Jan_2019",
  "details": "This stream is for the consignment of 200 tons of xyz material",
  "open":false
}
```
The output is the txid of the transaction creating the stream.
Sample output
```
{
"status": 200,
"tx_id": "d84f84849431d5a5c5565530021d4c8bc37bf7180c58a116bd42295f90b434e2"
}
```
### 2.2 Grant write permissions

To grant an entity write permission to a stream, use post /api/v1/grant_write_permission_to_stream and provide 3 parameters:
1. The primechain addresss of the entity to be granted write permission - `primechain_address_stream_writer`
2. The name of the data stream to which the entity is to be granted write permission - `stream_name`
3. The primechain addresss of the creator of the data stream - `primechain_address_stream_creator`

Sample input
```
{
  "primechain_address_stream_writer": "1BGuzWgkBoyCtk71YyN7BFapY69qhgBL1wmLXk",
  "stream_name": "200_tons_xyz_Jan_2019"
  "primechain_address_stream_creator": "1BGuzWgkBoyCtk71YyN7BFapY69qhgBL1wmLXk",
}
```
Sample output
```
{
  aaa
}
```
### 2.3 Revoke write permissions


## 2. On-board relevant exporters, importers, shippers etc.

create_keypair
{
"status": 200,
"response": {
"primechain_private_key": "V8DVtDuXK4iSQ9EtZ3Vm3VULG6phU3FTTxagQDpesXCc1NThQToqPBh2",
"primechain_address": "1CAaJRU6C6h8e6U6eWk7pxMCXggBVZ6azFK1j3",
"primechain_public_key": "032dce777777479f5ae48fac94ed9093a49bc70215059b3e06cfa6d390267e14d2"
}
}

## 3. Publish relevant invoices, contracts, guarantees, letters of credit, bills of lading etc.


## 4. Enable invoice discounting. 

## 5. Publish GPS information and documents in real-time.


## 6. Settle accounts in real-time without the need for manual reconciliation.



## 1. Letter of credit lifecycle management
For details on letter of credit lifecycle management, see:   
https://github.com/Primechain/primechain-api-docs/blob/master/docs/usecases/letter_of_credit.md

## 2. Invoice discounting, supply chain finance, factoring
For details on invoice discounting, supply chain finance, factoring, see:   
https://github.com/Primechain/primechain-api-docs/blob/master/docs/usecases/invoice_discounting.md

## 3. Bank guarantee lifecycle management
For details on bank guarantee lifecycle management, see:   
https://github.com/Primechain/primechain-api-docs/blob/master/docs/usecases/bank_guarantee.md

## Trade document samples
For sample formats of trade documents for direct issuance on the blockchain, see:
https://github.com/Primechain/primechain-api-docs/blob/master/docs/usecases/trade_documents.md

Have a query? Email us on info@primechain.in
